<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>FreeCode Camp - Tic Tac Toe</title>

    <link rel="stylesheet" href="./styles/bootstrap.min.css">
    <link rel="stylesheet" href="./styles/font-awesome.min.css">

    <link rel="stylesheet" href="./styles/styles.css">

    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.2/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container" ng-app="TicTacToe">
      <div class="jumbotron text-center" ng-controller="TicTacToeController as tCtrl">
        <h1>Tic Tac Toe</h1>
        <div class="container">
          <div class="row header">
            <div class="col-xs-offset-4 col-xs-2">
              <div>
                -{{ tCtrl.state }}-{{ tCtrl.computer }}-
                <span ng-hide="tCtrl.state == 'running'">
                  {{ tCtrl.result }}
                  <select ng-model="tCtrl.computer" ng-change="tCtrl.updateComputer()">
                    <option value="-1">2 Players</option>
                    <option value="0">Computer (novice)</option>
                    <option value="1">Computer (intermediate)</option>
                    <option value="2">Computer (unbeatable)</option>
                  </select>
                </span>
              </div>
            </div>
            <div class="col-xs-2">
              <button type="button" class="btn btn-primary" ng-click="tCtrl.reset()">restart</button>
              <button type="button" class="btn btn-primary" ng-click="tCtrl.start()" ng-if="tCtrl.state == 'initial'">start</button>
            </div>
          </div>
          <div class="row">
            <div class="col-xs-offset-4 col-xs-4 row">
              <div class="player {{player.id}} col-xs-6" ng-repeat="player in tCtrl.players" ng-class="{'active' : player.active}">
                  <i class="fa"></i> {{ player.name }}
              </div>
            </div>

          </div>
          <div class="row">
            <div class="col-xs-offset-4 col-xs-4">
              <div class="row board">
                <div class="col-xs-4 player {{entry.player}}" ng-repeat="entry in tCtrl.board" ng-click="tCtrl.select($index)" ng-class="{'marked': entry.marked, 'winner': entry.success}">
                  <!-- <pre>{{entry | json}}</pre> -->
                  <i class="fa" ng-if="entry.marked"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
        <footer>
        <p>assignment of <a href="https://www.freecodecamp.com/challenges/build-a-tic-tac-toe-game" target="_blank"><i class="fa fa-fire"></i> FreeCode Camp</a></p>
        </footer>
      </div>
    </div>
    <!-- libraries -->
    <script src="./lib/jquery-2.2.4.min.js" charset="utf-8"></script>
    <script src="./lib/bootstrap.min.js" charset="utf-8"></script>
    <script src="./lib/angular.min.js" charset="utf-8"></script>

    <script>
      // var players = [
      //   {
      //     name: 'Player 1',
      //     fa: 'fa-circle-o',
      //     active: true,
      //     fields: []
      //   }, {
      //     name:'Player 2',
      //     fa: 'fa-remove',
      //     active: false,
      //     fields: []
      //   }];
      // var board, activePlayer;
      //
      //
      // function reset() {
      //   // reset players
      //   players.forEach(p => p.fields=[]);
      //   activePlayer = players[0];
      //   // reset board
      //   board =[-1,-1,-1,-1,-1,-1,-1,-1,-1];
      //   $('.board>div').removeClass('marked').html('');
      //
      //   displayActivePlayer();
      // }
      // function nextTurn() {
      //   var turn = players.indexOf(activePlayer);
      //   turn = (turn +1) % players.length;
      //   players.forEach( (p, idx) => {
      //     p.active = (idx == turn);}
      //   );
      //   activePlayer = players.find(p => p.active);
      //   displayActivePlayer();
      // };
      // function displayActivePlayer() {
      //   $('#next').html('<i class="fa ' + activePlayer.fa +'"></i> ' + activePlayer.name);
      // };
      // function checkForResult() {
      //   var success = [
      //     // rows
      //     [0,1,2], [3,4,5] , [6,7,8],
      //     // cols
      //     [0,3,6], [1,4,7], [2,5,8],
      //     // dia
      //     [0,4,8],[2,4,6]
      //   ];
      //   // console.log(board, activePlayer.fields);
      //   if(success.find(s =>
      //      s.every( t => activePlayer.fields.indexOf(t)>-1)
      //    )) {
      //      console.log("success !!! " + activePlayer.name + " wins ...");
      //      $('.board>div').addClass("marked");
      //    };
      // };
      //
      // $('.board>div').click(function() {
      //   if($(this).hasClass('marked')){
      //     console.log('already selected');
      //   } else {
      //     activePlayer.fields.push($(this).index());
      //     board[$(this).index()] = activePlayer.fa;
      //     $(this).html('<i class="fa '+ activePlayer.fa + '"></i>');
      //     $(this).addClass('marked');
      //
      //     checkForResult();
      //     nextTurn();
      //   }
      // });
      // $('#restart').click(function() {
      //   reset()
      // });
      //
      // reset();
    </script>
    <!-- modules -->
    <script src="./src/tictactoe.module.js" charset="utf-8"></script>
    <!-- components -->
    <script src="./src/tictactoe.service.js" charset="utf-8"></script>
    <script src="./src/tictactoe.controller.js" charset="utf-8"></script>
  </body>
</html>
